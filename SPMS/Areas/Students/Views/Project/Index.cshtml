
@{
	ViewData["Title"] = "Milestone";
	var proposal = ViewData["projectproposal"] as IEnumerable<Project>;
	Project pjt = new Project();

}


<Partial name="_MilestoneHeader" />
<Partial name="_Sidebar" />

 <div class="content-body">
			<div class="container-fluid">
				<div class="row page-titles">
					<ol class="breadcrumb">
						<li class="breadcrumb-item active"><a href="javascript:void(0)">Project</a></li>
						<li class="breadcrumb-item"><a href="javascript:void(0)">proposal</a></li>
					</ol>
				</div>
				<!-- row -->

				<div class="row">
					<div class="col-lg-12">
						<div class="card">
							<div class="card-header">
								<h4 class="card-title">Project Topic</h4>
								@if(CurrentUser.Surname != null)
								{
									<button type="button" class="btn btn-primary mb-2" data-bs-toggle="modal" data-bs-target="#basicModal">Add Topic</button>
								}
								else
								{
									<button type="button" class="btn btn-primary mb-2" data-bs-toggle="modal" disabled data-bs-target="#basicModal">Add Topic</button>
								}
							</div>
								<span class="text-danger">@TempData["Error"]</span>
							<div class="card-body">
								<div class="table-responsive">
									<table class="table table-responsive-md">
										<thead>
											<tr>
												<th><strong>Matric</strong></th>
												<th><strong>Topic</strong></th>
												<th><strong>Proposal</strong></th>
												<th><strong>Status</strong></th>
												<th><strong>Remark</strong></th>
												<th><strong></strong></th>
											</tr>
										</thead>
										<tbody>
											@foreach (var item in @proposal)
											{
												<tr>
												
													<td>@item.Matric</td>
													<td>@item.Topic</td>
													<td><a href="@item.FileUrl" download>Dowload File</a></td>
													@if (@item.Status.Equals("Approved"))
													{
														<td><div class="d-flex align-items-center"><i class="fa fa-circle text-success me-1"></i> @item.Status</div></td>
													}
													else if (@item.Status.Equals("Rejected"))
													{
														<td><div class="d-flex align-items-center"><i class="fa fa-circle text-danger me-1"></i> @item.Status</div></td>
													}
													else 
													{
														<td><div class="d-flex align-items-center"><i class="fa fa-circle text-warning me-1"></i>  @item.Status</div></td>
													}
													<td>
														<a href="" data-bs-toggle="modal" data-bs-target="#remarkModal_@item.ProjectId"> View Remark </a>
														<div class="modal fade" id="remarkModal_@item.ProjectId">
															<div class="modal-dialog modal-dialog-centered" role="document">
																<div class="modal-content">
																	<div class="modal-header">
																		<h5 class="modal-title">Remark</h5>
																		<button type="button" class="btn-close" data-bs-dismiss="modal">
																		</button>
																	</div>
																	<div class="modal-body">
																		<p>@item.Remark</p>
																	</div>
																	<div class="modal-footer">
																		<button type="button" class="btn btn-danger light" data-bs-dismiss="modal">Close</button>
																		<button type="button" class="btn btn-primary">Save changes</button>
																	</div>
																</div>
															</div>
														</div>
													</td>
													<td>
														<div class="d-flex">
													<a data-bs-toggle="modal" data-bs-target="#basicModal_@item.ProjectId" class="btn btn-primary shadow btn-xs sharp me-1"><i class="fas fa-pencil-alt"></i></a>
													<div class="modal fade" id="basicModal_@item.ProjectId">
														<div class="modal-dialog" role="document">
															<div class="modal-content">
																<div class="modal-header">
																	<h5 class="modal-title">Add Project Topic</h5>
																	<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
																</div>
																<div class="modal-body">
																	<form asp-action="AddProject" method="post" enctype="multipart/form-data">
																		<input asp-for="@pjt.Matric" name="Matric" value="@CurrentUser.UserName" type="hidden" class="form-control">
																		<input asp-for="@pjt.Status" name="Status" value="Pending" type="hidden" class="form-control">
																		<input asp-for="@pjt.ProjectId" name="ProjectId" value="@item.ProjectId" type="hidden" class="form-control">


																		<div class="row">
																			<div class="col-lg-12">
																				<div class="mb-3">
																					<label class="text-black font-w600 form-label">Project Topic <span class="required">*</span></label>
																					<textarea asp-for="@pjt.Topic" name="Topic" type="text" class="form-control" rows="4" id="comment" required></textarea>
																				</div>
																			</div>
																			<div class="col-lg-12">
																				<div class="mb-3">
																					<label class="text-black font-w600 form-label">Upload Proposal <span class="required">*</span></label>
																					<input asp-for="@pjt.File" name="File" type="file" accept=".txt, .doc,.docs,.pdf" placeholder="Topic" required class="form-file-input form-control">

																				</div>
																			</div>
																			<div class="modal-footer">
																				<button type="button" class="btn btn-danger light" data-bs-dismiss="modal">Close</button>
																				<button type="submit" class="btn btn-primary">Add</button>
																			</div>
																		</div>
																	</form>
																</div>
															</div>
														</div>
													</div>
													@if (@item.Status != "Approved")
													{
															<a asp-action="Delete" asp-route-id="@item.ProjectId" class="btn btn-danger shadow btn-xs sharp"><i class="fa fa-trash"></i></a>
													}
														</div>
													</td>
												
												</tr>

												<!-- Modal -->

											}
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
					</div>

			</div>
</div>



<!-- Modal -->
<div class="modal fade" id="basicModal">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Add Project Topic</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
			</div>
			<div class="modal-body">
				<form asp-action="AddProject" method="post" enctype="multipart/form-data">
					<input asp-for="@pjt.Matric" name="Matric" value="@CurrentUser.UserName" type="hidden" class="form-control">
					<input asp-for="@pjt.Status" name="Status" value="Pending" type="hidden" class="form-control">

					<div class="row">
						<div class="col-lg-12">
							<div class="mb-3">
								<label class="text-black font-w600 form-label">Project Topic <span class="required">*</span></label>
								<textarea asp-for="@pjt.Topic" name="Topic" type="text" class="form-control" rows="4" id="comment" required></textarea>
							</div>
						</div>
						<div class="col-lg-12">
							<div class="mb-3">
								<label class="text-black font-w600 form-label">Upload Proposal <span class="required">*</span></label>
								<input asp-for="@pjt.File" name="File" type="file" accept=".txt, .doc,.docs,.pdf" placeholder="Topic" required class="form-file-input form-control">

							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger light" data-bs-dismiss="modal">Close</button>
							<button type="submit" class="btn btn-primary">Add</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>


